<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ğŸ¤– Ø±ÙˆØ¨ÙˆØª Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„Ø°ÙƒÙŠ</title>
  <style>
    body {
      font-family: "Tajawal", sans-serif;
      margin: 0;
      padding: 0;
      height: 100vh;
      display: flex;
      flex-direction: column;
      background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
      color: #fff;
      transition: background 0.5s, color 0.5s;
    }
    header {
      background: rgba(0,0,0,0.6);
      padding: 15px;
      text-align: center;
      font-size: 24px;
      font-weight: bold;
      color: #0f0;
      border-bottom: 2px solid #0f0;
      position: relative;
    }
    #modeToggle, #settingsToggle {
      position: absolute;
      top: 10px;
      background: #238636;
      border: none;
      border-radius: 20px;
      padding: 5px 15px;
      cursor: pointer;
      color: #fff;
      font-size: 14px;
    }
    #modeToggle { right: 15px; }
    #settingsToggle { left: 15px; }
    #chat {
      flex: 1;
      width: 95%;
      max-width: 700px;
      margin: 15px auto;
      padding: 15px;
      background: rgba(0,0,0,0.6);
      border-radius: 15px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      border: 1px solid #0f0;
      transition: background 0.5s;
    }
    .msg {
      margin: 8px;
      padding: 10px 15px;
      border-radius: 15px;
      max-width: 75%;
      font-size: 16px;
      line-height: 1.4;
      box-shadow: 0 0 5px rgba(0,0,0,0.3);
    }
    .user { align-self: flex-end; background: #238636; }
    .bot { align-self: flex-start; background: #30363d; }
    footer {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
      margin: 15px;
      width: 95%;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
    }
    input {
      flex: 1;
      padding: 12px;
      border-radius: 25px;
      border: none;
      outline: none;
      font-size: 16px;
      background: #161b22;
      color: #fff;
      box-shadow: inset 0 0 5px #0f0;
    }
    button {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      border: none;
      cursor: pointer;
      font-size: 20px;
      color: #fff;
      background: #238636;
      transition: 0.3s;
      flex-shrink: 0;
    }
    button:hover { background: #2ea043; }
    .clear-btn { background: #d73a49; }
    .clear-btn:hover { background: #f85149; }
    video {
      width: 90%;
      max-width: 400px;
      border: 3px solid #0f0;
      border-radius: 12px;
      margin: 10px auto;
      display: block;
      box-shadow: 0 0 15px rgba(0,255,0,0.5);
    }
    body.light {
      background: linear-gradient(135deg, #e0eafc, #cfdef3);
      color: #000;
    }
    body.light header { background: rgba(255,255,255,0.8); color: #111; border-bottom: 2px solid #238636; }
    body.light #chat { background: rgba(255,255,255,0.8); border: 1px solid #238636; }
    body.light input { background: #fff; color: #111; box-shadow: inset 0 0 5px #238636; }
    #sidebar {
      position: fixed;
      left: -250px;
      top: 0;
      width: 250px;
      height: 100%;
      background: rgba(0,0,0,0.9);
      color: #fff;
      padding: 20px;
      box-shadow: 3px 0 10px rgba(0,0,0,0.6);
      transition: left 0.4s;
      z-index: 1000;
    }
    #sidebar.open { left: 0; }
    #sidebar h2 { font-size: 20px; margin-bottom: 15px; }
    #sidebar label { display: block; margin: 10px 0 5px; }
    #sidebar select, #sidebar input[type=range] {
      width: 100%;
      padding: 5px;
      border-radius: 8px;
      border: none;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <header>
    ğŸ¤– Ø±ÙˆØ¨ÙˆØª Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„Ø°ÙƒÙŠ
    <button id="settingsToggle">âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
    <button id="modeToggle">â˜€ï¸ Ù†Ù‡Ø§Ø±ÙŠ</button>
  </header>

  <div id="sidebar">
    <h2>âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</h2>
    <label>ğŸŒ Ø§Ù„Ù„ØºØ©</label>
    <select id="langSelect">
      <option value="ar-SA">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
      <option value="en-US">English</option>
    </select>
    <label>ğŸš Ø³Ø±Ø¹Ø© Ø§Ù„ØµÙˆØª</label>
    <input id="speedRange" type="range" min="0.5" max="2" step="0.1" value="1">
    <label>ğŸ”  Ø­Ø¬Ù… Ø§Ù„Ø®Ø·</label>
    <select id="fontSelect">
      <option value="14">ØµØºÙŠØ±</option>
      <option value="16" selected>Ù…ØªÙˆØ³Ø·</option>
      <option value="20">ÙƒØ¨ÙŠØ±</option>
    </select>
  </div>

  <div id="chat"></div>
  <video id="video" autoplay muted playsinline></video>

  <footer>
    <input id="userInput" type="text" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§..." />
    <button onclick="sendMessage()">ğŸ“©</button>
    <button onclick="startRecognition()">ğŸ¤</button>
    <button onclick="detectObjects()">ğŸ“·</button>
    <button onclick="detectFaces()">ğŸ˜Š</button>
    <button class="clear-btn" onclick="clearChat()">ğŸ—‘ï¸</button>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/coco-ssd"></script>
  <script src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js"></script>

  <script>
    // --- Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ---
    const chatBox = document.getElementById("chat");
    const video = document.getElementById("video");
    const userInput = document.getElementById("userInput");

    // --- Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø­Ø§Ù„Ø© ---
    let memory = [];
    let speechLang = "ar-SA";
    let speechSpeed = 1;
    let faceApiLoaded = false;
    let faceDetectionInterval;
    let objectDetectionInterval;

    // --- Ø¯ÙˆØ§Ù„ Ø£Ø³Ø§Ø³ÙŠØ© Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ---
    function addMessage(text, sender) {
      const div = document.createElement("div");
      div.className = "msg " + sender;
      div.style.fontSize = document.getElementById("fontSelect").value + "px";
      div.innerText = text;
      chatBox.appendChild(div);
      chatBox.scrollTop = chatBox.scrollHeight;
      memory.push({ role: sender === "user" ? "user" : "assistant", content: text });
      if (memory.length > 12) memory.shift();
    }

    function say(text) {
      addMessage(text, "bot");
      const speech = new SpeechSynthesisUtterance(text);
      speech.lang = speechLang;
      speech.rate = speechSpeed;
      window.speechSynthesis.speak(speech);
    }

    function clearChat() {
      chatBox.innerHTML = "";
      memory = [];
      say("ØªÙ… Ù…Ø³Ø­ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© âœ¨");
    }

    // --- Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­ÙŠØ© (Ø§Ù„Ø·Ù‚Ø³) ---
    function getWeather() {
      say("Ø¨Ø§Ù„ØªØ£ÙƒÙŠØ¯ØŒ Ø³Ø£Ø­Ø§ÙˆÙ„ ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹Ùƒ Ù„Ø¬Ù„Ø¨ Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù‚Ø³.");
      if (!navigator.geolocation) {
        say("Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù…ØªØµÙØ­Ùƒ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø®Ø¯Ù…Ø© ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹.");
        return;
      }
      navigator.geolocation.getCurrentPosition(async (position) => {
        const lat = position.coords.latitude;
        const lon = position.coords.longitude;
        say("ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹Ùƒ. Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ù‚Ø³...");
        try {
          const response = await fetch(`https://wttr.in/${lat},${lon}?format=j1`);
          if (!response.ok) throw new Error('Weather API failed');
          const weatherData = await response.json();
          const area = weatherData.nearest_area[0].areaName[0].value;
          const currentCondition = weatherData.current_condition[0];
          const temp_C = currentCondition.temp_C;
          const feelsLike_C = currentCondition.FeelsLikeC;
          const description = currentCondition.weatherDesc[0].value;
          const weatherReport = `Ø§Ù„Ø·Ù‚Ø³ Ø§Ù„Ø¢Ù† ÙÙŠ Ø£Ù‚Ø±Ø¨ Ù…Ù†Ø·Ù‚Ø© Ù„ÙƒØŒ ${area}ØŒ Ù‡Ùˆ ${temp_C} Ø¯Ø±Ø¬Ø© Ù…Ø¦ÙˆÙŠØ©ØŒ Ù„ÙƒÙ† Ø§Ù„Ø¥Ø­Ø³Ø§Ø³ Ø§Ù„ÙØ¹Ù„ÙŠ Ù‡Ùˆ ${feelsLike_C} Ø¯Ø±Ø¬Ø©. Ø§Ù„Ø³Ù…Ø§Ø¡ ØªÙˆØµÙ Ø¨Ø£Ù†Ù‡Ø§: ${description}.`;
          say(weatherReport);
        } catch (error) {
          console.error("Error fetching weather:", error);
          say("Ø¹Ø°Ø±Ø§Ù‹ØŒ ÙˆØ§Ø¬Ù‡Øª Ù…Ø´ÙƒÙ„Ø© Ø£Ø«Ù†Ø§Ø¡ Ù…Ø­Ø§ÙˆÙ„Ø© Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ù‚Ø³.");
        }
      }, () => {
        say("Ù„Ù… Ø£ØªÙ…ÙƒÙ† Ù…Ù† Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ù…ÙˆÙ‚Ø¹Ùƒ. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù†Ùƒ Ø³Ù…Ø­Øª Ø¨Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹.");
      });
    }

    // --- Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª ÙˆØ§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø­ÙˆØ§Ø±ÙŠ ---
    async function sendMessage() {
      const text = userInput.value.trim();
      if (!text) return;
      addMessage(text, "user");
      userInput.value = "";

      if (text.includes("Ø§Ù„Ø·Ù‚Ø³")) {
        getWeather();
      } else if (text.includes("Ù…Ù† Ù‡Ùˆ Ù…ÙƒØªØ´Ù Ø§Ù„Ø¬Ø§Ø°Ø¨ÙŠØ©")) {
        const reply = "Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ø£ÙƒØ«Ø± Ø´Ù‡Ø±Ø© Ø¨Ø§ÙƒØªØ´Ø§Ù Ù‚Ø§Ù†ÙˆÙ† Ø§Ù„Ø¬Ø§Ø°Ø¨ÙŠØ© Ù‡Ùˆ Ø§Ù„Ø³ÙŠØ± Ø¥Ø³Ø­Ø§Ù‚ Ù†ÙŠÙˆØªÙ†.";
        say(reply);
      } else if (text.includes("ÙÙˆØ§Ø¦Ø¯ Ù…Ù…Ø§Ø±Ø³Ø© Ø§Ù„Ø±ÙŠØ§Ø¶Ø©")) {
        const reply = "Ù…Ù…Ø§Ø±Ø³Ø© Ø§Ù„Ø±ÙŠØ§Ø¶Ø© Ø¨Ø§Ù†ØªØ¸Ø§Ù… Ù„Ù‡Ø§ ÙÙˆØ§Ø¦Ø¯ ÙƒØ«ÙŠØ±Ø©! ÙÙ‡ÙŠ ØªØ³Ø§Ø¹Ø¯ ÙÙŠ Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„ÙˆØ²Ù†ØŒ ØªØ­Ø§Ø±Ø¨ Ø§Ù„Ø£Ù…Ø±Ø§Ø¶ØŒ ØªØ­Ø³Ù† Ø§Ù„Ù…Ø²Ø§Ø¬ØŒ ØªØ²ÙŠØ¯ Ø§Ù„Ø·Ø§Ù‚Ø©ØŒ ÙˆØªØ¹Ø²Ø² Ø§Ù„Ù†ÙˆÙ… Ø¨Ø´ÙƒÙ„ Ø£ÙØ¶Ù„.";
        say(reply);
      } else if (text.includes("Ø§Ø¨Ø­Ø« Ø¹Ù†")) {
        const query = text.replace("Ø§Ø¨Ø­Ø« Ø¹Ù†", "").trim();
        say(`Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù†: ${query}. Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙŠØ²Ø© Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ± Ø­Ø§Ù„ÙŠØ§Ù‹.`);
      } else {
        say("Ù„Ù… ØªØªÙ… Ø¨Ø±Ù…Ø¬ØªÙŠ Ø¹Ù„Ù‰ ÙÙ‡Ù… Ù‡Ø°Ø§ Ø¨Ø¹Ø¯ØŒ Ù„ÙƒÙ†ÙŠ Ø£ØªØ¹Ù„Ù… Ø¨Ø§Ø³ØªÙ…Ø±Ø§Ø±!");
      }
    }

    // --- ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø£ÙˆØ§Ù…Ø± Ø§Ù„ØµÙˆØªÙŠØ© ---
    function startRecognition() {
      const recognition = new(window.SpeechRecognition || window.webkitSpeechRecognition)();
      recognition.lang = speechLang;
      recognition.start();
      recognition.onresult = function(event) {
        const userSpeech = event.results[0][0].transcript.trim();
        addMessage(userSpeech, "user");
        if (userSpeech.includes("Ø§Ù…Ø³Ø­ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©")) {
          clearChat();
        } else if (userSpeech.includes("Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ")) {
          document.body.classList.remove("light");
          document.getElementById("modeToggle").innerText = "â˜€ï¸ Ù†Ù‡Ø§Ø±ÙŠ";
          say("ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ.");
        } else if (userSpeech.includes("Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ")) {
          document.body.classList.add("light");
          document.getElementById("modeToggle").innerText = "ğŸŒ™ Ù„ÙŠÙ„ÙŠ";
          say("ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ.");
        } else {
          userInput.value = userSpeech;
          sendMessage();
        }
      };
      recognition.onerror = function(event) {
        say("Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù„Ù… Ø£ØªÙ…ÙƒÙ† Ù…Ù† Ø³Ù…Ø§Ø¹Ùƒ Ø¨ÙˆØ¶ÙˆØ­.");
      }
    }

    // --- ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø±Ø¤ÙŠØ© Ø§Ù„Ø­Ø§Ø³ÙˆØ¨ÙŠØ© (Ø§Ù„Ø£Ø´ÙŠØ§Ø¡) ---
    async function detectObjects() {
      say("Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø´ÙŠØ§Ø¡...");
      const model = await cocoSsd.load();
      say("ØªÙ… ØªØ´ØºÙŠÙ„ Ù†Ø¸Ø§Ù… Ø§Ù„Ø±Ø¤ÙŠØ© Ù„ÙˆØµÙ Ø§Ù„Ø£Ø´ÙŠØ§Ø¡.");
      if (faceDetectionInterval) clearInterval(faceDetectionInterval);
      if (objectDetectionInterval) clearInterval(objectDetectionInterval);
      let lastSaidObjects = "";
      objectDetectionInterval = setInterval(async () => {
        const predictions = await model.detect(video);
        if (predictions.length > 0) {
          const uniqueObjects = Array.from(new Set(predictions.map(p => p.class)));
          const currentObjectsKey = uniqueObjects.sort().join(',');
          if (currentObjectsKey === lastSaidObjects) return;
          lastSaidObjects = currentObjectsKey;
          let description = "Ø£Ø±Ù‰ ÙÙŠ Ø§Ù„Ù…Ø´Ù‡Ø¯ ";
          if (uniqueObjects.length === 1) description += uniqueObjects[0] + ".";
          else if (uniqueObjects.length === 2) description += uniqueObjects[0] + " Ùˆ " + uniqueObjects[1] + ".";
          else {
            const lastObject = uniqueObjects.pop();
            description += uniqueObjects.join("ØŒ ") + "ØŒ Ø¨Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ " + lastObject + ".";
          }
          say(description);
        }
      }, 5000);
    }

    // --- ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø±Ø¤ÙŠØ© Ø§Ù„Ø­Ø§Ø³ÙˆØ¨ÙŠØ© (Ø§Ù„ÙˆØ¬ÙˆÙ‡ ÙˆØ§Ù„Ù…Ø´Ø§Ø¹Ø±) ---
    async function loadFaceApiModels() {
      if (faceApiLoaded) return;
      say("Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ¬Ù‡ Ù„Ù„Ù…Ø±Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰...");
      const MODEL_URL = 'https://cdn.jsdelivr.net/npm/@vladmandic/face-api/model/';
      await faceapi.nets.tinyFaceDetector.loadFromUri(MODEL_URL);
      await faceapi.nets.faceLandmark68Net.loadFromUri(MODEL_URL);
      await faceapi.nets.faceExpressionNet.loadFromUri(MODEL_URL);
      say("Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ¬Ù‡ Ø¬Ø§Ù‡Ø²Ø©.");
      faceApiLoaded = true;
    }
    const emotionTranslations = {
      neutral: 'Ù…Ø­Ø§ÙŠØ¯', happy: 'Ø³Ø¹ÙŠØ¯', sad: 'Ø­Ø²ÙŠÙ†', angry: 'ØºØ§Ø¶Ø¨',
      fearful: 'Ø®Ø§Ø¦Ù', disgusted: 'Ù…Ø´Ù…Ø¦Ø²', surprised: 'Ù…ØªÙØ§Ø¬Ø¦'
    };
    async function detectFaces() {
      if (!faceApiLoaded) await loadFaceApiModels();
      if (objectDetectionInterval) clearInterval(objectDetectionInterval);
      if (faceDetectionInterval) clearInterval(faceDetectionInterval);
      say("ØªÙ… ØªÙØ¹ÙŠÙ„ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø§Ø¹Ø±. Ø§Ù†Ø¸Ø± Ø¥Ù„Ù‰ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§.");
      faceDetectionInterval = setInterval(async () => {
        const detections = await faceapi.detectAllFaces(video, new faceapi.TinyFaceDetectorOptions()).withFaceExpressions();
        if (detections.length > 0) {
          const expressions = detections[0].expressions;
          let highestEmotion = Object.keys(expressions).reduce((a, b) => expressions[a] > expressions[b] ? a : b);
          say(`Ø£Ø±Ù‰ ÙˆØ¬Ù‡Ø§Ù‹ ÙŠØ¨Ø¯Ùˆ Ø£Ù†Ù‡ ${emotionTranslations[highestEmotion]}.`);
          clearInterval(faceDetectionInterval);
          say("ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø§Ø¹Ø±.");
        }
      }, 3000);
    }

    // --- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙˆØ¹Ù…Ù„ÙŠØ§Øª Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„ ---
    async function startCamera() {
      try {
        const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: { exact: "environment" } } });
        video.srcObject = stream;
      } catch (e) {
        const stream = await navigator.mediaDevices.getUserMedia({ video: true });
        video.srcObject = stream;
      }
    }
    document.getElementById("modeToggle").onclick = () => {
      document.body.classList.toggle("light");
      const btn = document.getElementById("modeToggle");
      btn.innerText = document.body.classList.contains("light") ? "ğŸŒ™ Ù„ÙŠÙ„ÙŠ" : "â˜€ï¸ Ù†Ù‡Ø§Ø±ÙŠ";
    };
    document.getElementById("settingsToggle").onclick = () => document.getElementById("sidebar").classList.toggle("open");
    document.getElementById("langSelect").onchange = (e) => speechLang = e.target.value;
    document.getElementById("speedRange").oninput = (e) => speechSpeed = parseFloat(e.target.value);
    userInput.addEventListener("keypress", (e) => { if (e.key === "Enter") sendMessage(); });

    // --- Ø¨Ø¯Ø¡ ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ---
    (async () => {
      await startCamera();
      say("Ù…Ø±Ø­Ø¨Ù‹Ø§! Ø£Ù†Ø§ Ø±ÙˆØ¨ÙˆØª Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„Ø°ÙƒÙŠ. Ø£Ù†Ø§ Ø¬Ø§Ù‡Ø² Ù„Ù„ØªÙØ§Ø¹Ù„.");
      await loadFaceApiModels();
    })();
  </script>
</body>
</html>
